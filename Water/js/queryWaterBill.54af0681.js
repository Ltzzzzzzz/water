(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["queryWaterBill"],{"087b":function(t,e,a){"use strict";var i=a("e855"),n=a.n(i);n.a},"0b7e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pageContainer",attrs:{id:"queryWaterBill"}},[a("Navbar",[a("p",{staticClass:"desc"},[t._v(" 尊敬的用户 "),a("br"),t._v(" 请输入您的信息进行查询 ")])]),a("div",{staticClass:"container"},[a("van-form",{on:{submit:t.submit}},[a("div",{staticClass:"formWrapper"},[a("van-field",{attrs:{name:"accountNumber",label:"户号",placeholder:"户号",rules:t.rules.accountNumber},model:{value:t.accountNumber,callback:function(e){t.accountNumber=e},expression:"accountNumber"}}),a("van-field",{attrs:{name:"accountName",label:"户名",placeholder:"户名",rules:t.rules.accountName},model:{value:t.accountName,callback:function(e){t.accountName=e},expression:"accountName"}}),a("DatePicker",{attrs:{placeholder:"开始时间",name:"startDate",forward:"1",rules:t.rules.startDate},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),a("DatePicker",{attrs:{placeholder:"结束时间",name:"endDate"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),a("div",{staticClass:"buttonWrapper"},[a("van-button",{attrs:{size:"small",text:"查询",round:"",block:"",type:"info","native-type":"submit"}})],1)],1)]),t.list.length?a("div",{staticClass:"billList"},[a("div",{staticClass:"ctrlWrapper"},[a("div",{staticClass:"switchWrapper",on:{click:function(e){t.switchCheck=!t.switchCheck}}},[a("van-switch",{attrs:{size:"16","active-color":"#07c160","inactive-color":"#ee0a24"},on:{click:function(t){t.stopPropagation()}},model:{value:t.switchCheck,callback:function(e){t.switchCheck=e},expression:"switchCheck"}}),a("span",[t._v("全选")])],1),a("div",{staticClass:"buttonWrapper"},[a("van-button",{attrs:{block:"",round:"",size:"mini",type:"primary",text:"缴 费"}})],1)]),a("van-list",{attrs:{finished:t.finished,"error-text":"请求失败，点击重新加载","finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return a("QueryWaterBillItem",{key:t.id,attrs:{data:t}})})),1)],1):a("div",{staticClass:"tip"},[a("van-empty")],1)],1)],1)},n=[],s=(a("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"queryWaterBillItem"},[t.data.finish?a("div",{staticClass:"finishWrapper"},[a("div",{staticClass:"finish"}),a("p",[t._v("已缴清")])]):a("div",{staticClass:"switchWrapper"},[a("van-switch",{attrs:{size:"16","active-color":"#07c160","inactive-color":"#ee0a24"},on:{click:function(t){t.stopPropagation()}},model:{value:t.data.check,callback:function(e){t.$set(t.data,"check",e)},expression:"data.check"}})],1),a("router-link",{staticClass:"detailContainer",attrs:{to:"/queryWaterBillDetail"}},[a("div",{staticClass:"detailWrapper"},[a("div",{staticClass:"infoWrapper"},[a("span",{staticClass:"label"},[t._v("总金额")]),a("span",[t._v(t._s(t.data.totalPrice)+"元")])]),a("div",{staticClass:"infoWrapper"},[a("span",{staticClass:"label"},[t._v("水量")]),a("span",[t._v(t._s(t.data.waterVolume))])]),a("div",{staticClass:"infoWrapper"},[a("span",{staticClass:"label"},[t._v("上期行至")]),a("span",[t._v(t._s(t.data.lastTimeVolume))])]),a("div",{staticClass:"infoWrapper"},[a("span",{staticClass:"label"},[t._v("本期行至")]),a("span",[t._v(t._s(t.data.lastTimeVolume+t.data.waterVolume))])]),a("div",{staticClass:"infoWrapper block"},[a("span",{staticClass:"label"},[t._v("抄表时间")]),a("span",[t._v(t._s(t.data.metarDate))])])]),a("van-icon",{attrs:{color:"#555555",name:"arrow"}})],1)],1)}),r=[],l={name:"queryWaterBillItem",props:["data"]},c=l,o=(a("087b"),a("2877")),u=Object(o["a"])(c,s,r,!1,null,"08bdf19f",null),d=u.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"datePicker"},[a("van-field",{attrs:{readonly:"",clickable:"",label:t.placeholder,value:t.value,name:t.name,rules:t.rules,placeholder:"选择"+t.placeholder},on:{click:function(e){t.showPicker=!0}}}),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[a("van-datetime-picker",{attrs:{type:"date",title:t.placeholder},on:{confirm:t.onConfirm},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1)},h=[],f=a("2f14"),m={name:"DatePicker",props:["value","placeholder","name","rules","forward"],data:function(){return{currentDate:new Date,showPicker:!1}},created:function(){this.forward?this.$emit("input",Object(f["a"])(this.forwardDate(this.forward))):this.$emit("input",Object(f["a"])(this.currentDate))},methods:{forwardDate:function(t){var e=new Date,a=e.getFullYear()-t,i=e.getMonth(),n=e.getDate();return new Date(a,i,n)},onConfirm:function(t){this.$emit("input",Object(f["a"])(this.currentDate)),this.showPicker=!1}}},v=m,b=(a("9a2c"),Object(o["a"])(v,p,h,!1,null,"44e0f8e2",null)),k=b.exports,w={name:"queryWaterBill",components:{QueryWaterBillItem:d,DatePicker:k},data:function(){return{lastTimeVolume:50,switchCheck:!0,list:[],loading:!1,finished:!1,accountNumber:"",accountName:"",startDate:"",endDate:"",rules:{accountNumber:[{required:!0,message:"请填写户号"}],accountName:[{required:!0,message:"请填写户名"}],startDate:[{validator:this.startDateValidator,message:"开始时间不能大于结束时间"}]}}},beforeRouteLeave:function(t,e,a){var i=t.meta.keepAlive?t.meta.keepAlive:"";i||this.$destroy(),this.$store.commit("globel/setKeepAlive",i),a()},methods:{submit:function(t){this.list.length&&(this.list=[],this.finished=!1);for(var e=1;e<=10;e++){var a={id:e,totalPrice:Math.round(50*Math.random()*3*100)/100,waterVolume:Math.floor(100*Math.random()),lastTimeVolume:Math.ceil(this.lastTimeVolume+(this.list[this.list.length-1]?this.list[this.list.length-1].waterVolume:0)),finish:e<9,check:!this.finish,metarDate:"2020-".concat(e<10?"0"+(e-1):e-1,"-20至2020-").concat(e<10?"0"+e:e,"-19")};this.list.push(a)}this.list.reverse()},onLoad:function(){var t=this;setTimeout((function(){for(var e=1;e<=10;e++){var a={id:t.list.length+1,totalPrice:Math.round(50*Math.random()*3*100)/100,waterVolume:Math.floor(100*Math.random()),lastTimeVolume:Math.ceil(t.lastTimeVolume+(t.list[t.list.length-1]?t.list[t.list.length-1].waterVolume:0)),finish:!0,check:!t.finish,metarDate:"2020-".concat(e<10?"0"+(e-1):e-1,"-20至2020-").concat(e<10?"0"+e:e,"-19")};t.list.push(a)}t.loading=!1,t.list.length>=20&&(t.finished=!0)}),1e3)},startDateValidator:function(t){return new Date(t)<=new Date(this.endDate)}}},g=w,D=(a("2718"),Object(o["a"])(g,i,n,!1,null,"7150fe7c",null));e["default"]=D.exports},"25f0":function(t,e,a){"use strict";var i=a("6eeb"),n=a("825a"),s=a("d039"),r=a("ad6d"),l="toString",c=RegExp.prototype,o=c[l],u=s((function(){return"/a/b"!=o.call({source:"a",flags:"b"})})),d=o.name!=l;(u||d)&&i(RegExp.prototype,l,(function(){var t=n(this),e=String(t.source),a=t.flags,i=String(void 0===a&&t instanceof RegExp&&!("flags"in c)?r.call(t):a);return"/"+e+"/"+i}),{unsafe:!0})},2718:function(t,e,a){"use strict";var i=a("a482"),n=a.n(i);n.a},"2f14":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return l}));a("a15b"),a("d81d"),a("d3b7"),a("25f0");var i,n,s=function(t){return t=t.toString(),t[1]?t:"0"+t},r=function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return[e,a,i].map(s).join("/")},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){var a=this,s=Date.now();n&&s-n<e?(clearTimeout(i),i=setTimeout((function(){n=s,t.apply(a)}),e)):(n=s,t.apply(this))}}},8074:function(t,e,a){},"9a2c":function(t,e,a){"use strict";var i=a("8074"),n=a.n(i);n.a},a15b:function(t,e,a){"use strict";var i=a("23e7"),n=a("44ad"),s=a("fc6a"),r=a("a640"),l=[].join,c=n!=Object,o=r("join",",");i({target:"Array",proto:!0,forced:c||!o},{join:function(t){return l.call(s(this),void 0===t?",":t)}})},a482:function(t,e,a){},d81d:function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").map,s=a("1dde"),r=a("ae40"),l=s("map"),c=r("map");i({target:"Array",proto:!0,forced:!l||!c},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},e855:function(t,e,a){}}]);